<div class="container mt-5">
    <div *ngIf="!(isAuthResolved$ | async); else content" class="spinner-container">
        <mat-spinner></mat-spinner>
    </div>

    <ng-template #content>
        <div *ngIf="isLoggedIn$ | async; else notLoggedIn">
            <!-- Admin Dashboard -->
            <app-admin-dashboard *ngIf="(currentUser$ | async) && (currentUser$ | async)?.roleName === 'Admin'">
            </app-admin-dashboard>

            <!-- Instructor Dashboard -->
            <app-instructor-dashboard
                *ngIf="(currentUser$ | async) && (currentUser$ | async)?.roleName === 'Instructor'">
            </app-instructor-dashboard>

            <!-- Student Dashboard -->
            <app-student-dashboard *ngIf="(currentUser$ | async) && (currentUser$ | async)?.roleName === 'Student'">
            </app-student-dashboard>
        </div>

        <!-- Landing Page - Unregistered Users -->
        <ng-template #notLoggedIn>
            <div class="section-title">
                <h1 class="text-center centered mb-4">Virtual Learning Environment</h1>
            </div>

            <p class="text-center landing-tagline">
                Empowering students and educators with a modern and user-friendly platform.
            </p>

            <div class="row">
                <div class="col-12 col-md-6 my-4 mb-md-0">
                    <div class="hero-image">
                        <img src="/vle-hero-banner2.jpg" alt="hero banner" class="img-fluid">
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <ul class="landing-features gap-lg-4">
                        <li>
                            <i class="bi bi-book"></i>
                            <strong>Access Module Materials:</strong> Study anytime, anywhere.
                        </li>
                        <li>
                            <i class="bi bi-upload"></i>
                            <strong>Submit Assignments:</strong> Fast, paperless submissions.
                        </li>
                        <li>
                            <i class="bi bi-bell"></i>
                            <strong>Real-Time Notifications:</strong> Stay updated on grades and feedback.
                        </li>
                        <li>
                            <i class="bi bi-alarm"></i>
                            <strong>Reminders:</strong> Get automatic emails for upcoming deadlines.
                        </li>
                        <li>
                            <i class="bi bi-credit-card"></i>
                            <strong>Easy Payments:</strong> Pay securely for modules with Stripe.
                        </li>
                        <li>
                            <i class="bi bi-shield-lock"></i>
                            <strong>Secure & Private:</strong> Your data is protected.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="landing-cta">
                <em>
                    Join the students and educators already using our service and
                    <a href="/register" class="fw-semibold">register here!</a>
                </em>
            </div>
        </ng-template>
    </ng-template>
</div>